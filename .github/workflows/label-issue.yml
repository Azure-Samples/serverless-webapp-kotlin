# label newly opened issues with a label triage

name: Label Issue

on:
  issues:
    types: [opened]

permissions:
    issues: write
    contents: read

jobs:
    label-issue:
        runs-on: ubuntu-latest
        steps:
        - name: Label issues
          uses: actions/github-script@v4
          with:
              github-token: ${{ secrets.GITHUB_TOKEN }}
              script: |
                github.issues.addLabels({
                    issue_number: context.issue.number,
                    owner: context.repo.owner,
                    repo: context.repo.repo,
                    labels: ['triage']
                })
    # assign the issue to the person who opened it
    assign-issues:
      runs-on: ubuntu-latest
      steps:
        - name: Assign issues
          uses: actions/github-script@v4
          with:
            github-token: ${{ secrets.GITHUB_TOKEN }}
            script: |
              github.issues.update({
                issue_number: context.issue.number,
                owner: context.repo.owner,
                repo: context.repo.repo,
                assignees: [context.issue.user.login]
              })
        
